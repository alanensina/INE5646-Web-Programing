{
  "{\"sourceRoot\":\"C:\\\\Users\\\\alan.ensina\\\\Desktop\\\\Alan\\\\github\\\\web-programing\\\\05-app_lembretes\\\\servidor\\\\src\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\Users\\\\alan.ensina\\\\Desktop\\\\Alan\\\\github\\\\web-programing\\\\05-app_lembretes\\\\servidor\",\"filename\":\"C:\\\\Users\\\\alan.ensina\\\\Desktop\\\\Alan\\\\github\\\\web-programing\\\\05-app_lembretes\\\\servidor\\\\src\\\\app.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\Users\\\\alan.ensina\\\\Desktop\\\\Alan\\\\github\\\\web-programing\\\\05-app_lembretes\\\\servidor\",\"plugins\":[{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.4.4": {
    "metadata": {},
    "options": {
      "sourceRoot": "C:\\Users\\alan.ensina\\Desktop\\Alan\\github\\web-programing\\05-app_lembretes\\servidor\\src",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "C:\\Users\\alan.ensina\\Desktop\\Alan\\github\\web-programing\\05-app_lembretes\\servidor",
      "filename": "C:\\Users\\alan.ensina\\Desktop\\Alan\\github\\web-programing\\05-app_lembretes\\servidor\\src\\app.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "C:\\Users\\alan.ensina\\Desktop\\Alan\\github\\web-programing\\05-app_lembretes\\servidor",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "loose": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "C:\\Users\\alan.ensina\\Desktop\\Alan\\github\\web-programing\\05-app_lembretes\\servidor\\src\\app.js",
        "plugins": [
          "asyncGenerators",
          "objectRestSpread",
          "jsonStrings",
          "optionalCatchBinding"
        ]
      },
      "generatorOpts": {
        "filename": "C:\\Users\\alan.ensina\\Desktop\\Alan\\github\\web-programing\\05-app_lembretes\\servidor\\src\\app.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "C:\\Users\\alan.ensina\\Desktop\\Alan\\github\\web-programing\\05-app_lembretes\\servidor\\src",
        "sourceFileName": "app.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nrequire(\"./env\");\n\nvar _https = _interopRequireDefault(require(\"https\"));\n\nvar _fs = _interopRequireDefault(require(\"fs\"));\n\nvar _path = _interopRequireDefault(require(\"path\"));\n\nvar _express = _interopRequireDefault(require(\"express\"));\n\nvar _bodyParser = _interopRequireDefault(require(\"body-parser\"));\n\nvar _helmet = _interopRequireDefault(require(\"helmet\"));\n\nvar _persistencia = require(\"./persistencia\");\n\nvar _jwt_util = require(\"./jwt_util\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst PORTA = process.env.PORTA;\nconst opcoes = {\n  key: _fs.default.readFileSync(_path.default.resolve(__dirname, '../cert/key.pem')),\n  cert: _fs.default.readFileSync(_path.default.resolve(__dirname, '../cert/cert.pem'))\n};\nconst app = (0, _express.default)();\napp.use(_bodyParser.default.json());\napp.use((0, _helmet.default)());\napp.use(_express.default.static(_path.default.resolve(__dirname, '../publico')));\napp.post('/cmdFacaLogin', (req, res) => {\n  const {\n    login,\n    senha\n  } = req.body;\n  const senhaCriptografada = (0, _persistencia.criptografaSenha)(senha);\n  (0, _persistencia.leUsuario)(login).then(usuario => {\n    if (usuario !== null && usuario.senha === senhaCriptografada) {\n      res.json({\n        ok: true,\n        token: (0, _jwt_util.geraToken)(login)\n      });\n    } else {\n      res.json({\n        ok: false,\n        message: 'login e/ou senha inválidos'\n      });\n    }\n  }).catch(erro => {\n    res.json({\n      ok: false,\n      message: erro.message\n    });\n  });\n});\napp.post('/cmdFacaCadastro', (req, res) => {\n  const {\n    login,\n    senha\n  } = req.body;\n  const senhaCriptografada = (0, _persistencia.criptografaSenha)(senha);\n  (0, _persistencia.cadastraUsuario)(login, senhaCriptografada).then(resultado => {\n    if (resultado) {\n      res.json({\n        ok: true,\n        token: (0, _jwt_util.geraToken)(login)\n      });\n    } else {\n      res.json({\n        ok: false,\n        message: 'Login já foi cadastrado'\n      });\n    }\n  }).catch(erro => {\n    res.json({\n      ok: false,\n      message: erro.message\n    });\n  });\n});\napp.post('/cmdPubliqueLembrete', (req, res) => {\n  const {\n    texto,\n    token\n  } = req.body;\n  const dadosToken = (0, _jwt_util.validaToken)(token);\n\n  if (dadosToken !== null) {\n    (0, _persistencia.registraLembrete)(dadosToken.login, texto).then(idRegistrado => {\n      res.json({\n        ok: true,\n        idRegistrado\n      });\n    }).catch(erro => {\n      res.json({\n        ok: false,\n        message: erro.message\n      });\n    });\n  } else {\n    res.json({\n      ok: false,\n      message: 'token inválido'\n    });\n  }\n});\napp.delete('/cmdApagueLembrete', (req, res) => {\n  const {\n    idLembrete,\n    token\n  } = req.body;\n  const dadosToken = (0, _jwt_util.validaToken)(token);\n\n  if (dadosToken !== null) {\n    (0, _persistencia.apagaLembrete)(idLembrete).then(() => {\n      res.json({\n        ok: true\n      });\n    }).catch(erro => {\n      res.json({\n        ok: false,\n        message: erro.message\n      });\n    });\n  } else {\n    res.json({\n      ok: false,\n      message: 'token inválido'\n    });\n  }\n});\napp.get('/qryLeiaLembretes', (req, res) => {\n  const {\n    token\n  } = JSON.parse(req.query.dados);\n  const dadosToken = (0, _jwt_util.validaToken)(token);\n\n  if (dadosToken !== null) {\n    (0, _persistencia.leLembretes)(dadosToken.login).then(lembretes => {\n      res.json({\n        ok: true,\n        lembretes\n      });\n    }).catch(erro => {\n      res.json({\n        ok: false,\n        message: erro.message\n      });\n    });\n  } else {\n    res.json({\n      ok: false,\n      message: 'token inválido'\n    });\n  }\n});\n\nconst server = _https.default.createServer(opcoes, app); // eslint-disable-next-line no-console\n\n\nserver.listen(PORTA, () => console.log(`Servidor no ar na porta ${PORTA}...`));\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJuYW1lcyI6WyJQT1JUQSIsInByb2Nlc3MiLCJlbnYiLCJvcGNvZXMiLCJrZXkiLCJmcyIsInJlYWRGaWxlU3luYyIsInBhdGgiLCJyZXNvbHZlIiwiX19kaXJuYW1lIiwiY2VydCIsImFwcCIsInVzZSIsImJvZHlQYXJzZXIiLCJqc29uIiwiZXhwcmVzcyIsInN0YXRpYyIsInBvc3QiLCJyZXEiLCJyZXMiLCJsb2dpbiIsInNlbmhhIiwiYm9keSIsInNlbmhhQ3JpcHRvZ3JhZmFkYSIsInRoZW4iLCJ1c3VhcmlvIiwib2siLCJ0b2tlbiIsIm1lc3NhZ2UiLCJjYXRjaCIsImVycm8iLCJyZXN1bHRhZG8iLCJ0ZXh0byIsImRhZG9zVG9rZW4iLCJpZFJlZ2lzdHJhZG8iLCJkZWxldGUiLCJpZExlbWJyZXRlIiwiZ2V0IiwiSlNPTiIsInBhcnNlIiwicXVlcnkiLCJkYWRvcyIsImxlbWJyZXRlcyIsInNlcnZlciIsImh0dHBzIiwiY3JlYXRlU2VydmVyIiwibGlzdGVuIiwiY29uc29sZSIsImxvZyJdLCJtYXBwaW5ncyI6Ijs7QUFBQTs7QUFFQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFFQTs7QUFLQTs7OztBQUVBLE1BQU1BLEtBQUssR0FBR0MsT0FBTyxDQUFDQyxHQUFSLENBQVlGLEtBQTFCO0FBQ0EsTUFBTUcsTUFBTSxHQUFHO0FBQ2JDLEVBQUFBLEdBQUcsRUFBRUMsWUFBR0MsWUFBSCxDQUFnQkMsY0FBS0MsT0FBTCxDQUFhQyxTQUFiLEVBQXdCLGlCQUF4QixDQUFoQixDQURRO0FBRWJDLEVBQUFBLElBQUksRUFBRUwsWUFBR0MsWUFBSCxDQUFnQkMsY0FBS0MsT0FBTCxDQUFhQyxTQUFiLEVBQXdCLGtCQUF4QixDQUFoQjtBQUZPLENBQWY7QUFLQSxNQUFNRSxHQUFHLEdBQUcsdUJBQVo7QUFFQUEsR0FBRyxDQUFDQyxHQUFKLENBQVFDLG9CQUFXQyxJQUFYLEVBQVI7QUFDQUgsR0FBRyxDQUFDQyxHQUFKLENB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TUMsR0FBTixLQUFjO0FBQ3pDLFFBQU07QUFBRVEsSUFBQUE7QUFBRixNQUFZVyxJQUFJLENBQUNDLEtBQUwsQ0FBV3JCLEdBQUcsQ0FBQ3NCLEtBQUosQ0FBVUMsS0FBckIsQ0FBbEI7QUFDQSxRQUFNUixVQUFVLEdBQUcsMkJBQVlOLEtBQVosQ0FBbkI7O0FBQ0EsTUFBSU0sVUFBVSxLQUFLLElBQW5CLEVBQXlCO0FBQ3ZCLG1DQUFZQSxVQUFVLENBQUNiLEtBQXZCLEVBQ0dJLElBREgsQ0FDUWtCLFNBQVMsSUFBSTtBQUNqQnZCLE1BQUFBLEdBQUcsQ0FBQ0wsSUFBSixDQUFTO0FBQUVZLFFBQUFBLEVBQUUsRUFBRSxJQUFOO0FBQVlnQixRQUFBQTtBQUFaLE9BQVQ7QUFDRCxLQUhILEVBSUdiLEtBSkgsQ0FJU0MsSUFBSSxJQUFJO0FBQ2JYLE1BQUFBLEdBQUcsQ0FBQ0wsSUFBSixDQUFTO0FBQUVZLFFBQUFBLEVBQUUsRUFBRSxLQUFOO0FBQWFFLFFBQUFBLE9BQU8sRUFBRUUsSUFBSSxDQUFDRjtBQUEzQixPQUFUO0FBQ0QsS0FOSDtBQU9ELEdBUkQsTUFRTztBQUNMVCxJQUFBQSxHQUFHLENBQUNMLElBQUosQ0FBUztBQUFFWSxNQUFBQSxFQUFFLEVBQUUsS0FBTjtBQUFhRSxNQUFBQSxPQUFPLEVBQUU7QUFBdEIsS0FBVDtBQUNEO0FBQ0YsQ0FkRDs7QUFnQkEsTUFBTWUsTUFBTSxHQUFHQyxlQUFNQyxZQUFOLENBQW1CMUMsTUFBbkIsRUFBMkJRLEdBQTNCLENBQWYsQyxDQUVBOzs7QUFDQWdDLE1BQU0sQ0FBQ0csTUFBUCxDQUFjOUMsS0FBZCxFQUFxQixNQUFNK0MsT0FBTyxDQUFDQyxHQUFSLENBQWEsMkJBQTBCaEQsS0FBTSxLQUE3QyxDQUEzQiIsInNvdXJjZVJvb3QiOiJDOlxcVXNlcnNcXGFsYW4uZW5zaW5hXFxEZXNrdG9wXFxBbGFuXFxnaXRodWJcXHdlYi1wcm9ncmFtaW5nXFwwNS1hcHBfbGVtYnJldGVzXFxzZXJ2aWRvclxcc3JjIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICcuL2VudidcclxuXHJcbmltcG9ydCBodHRwcyBmcm9tICdodHRwcydcclxuaW1wb3J0IGZzIGZyb20gJ2ZzJ1xyXG5pbXBvcnQgcGF0aCBmcm9tICdwYXRoJ1xyXG5pbXBvcnQgZXhwcmVzcyBmcm9tICdleHByZXNzJ1xyXG5pbXBvcnQgYm9keVBhcnNlciBmcm9tICdib2R5LXBhcnNlcidcclxuaW1wb3J0IGhlbG1ldCBmcm9tICdoZWxtZXQnXHJcblxyXG5pbXBvcnQge1xyXG4gIGxlVXN1YXJpbywgY2FkYXN0cmFVc3VhcmlvLFxyXG4gIHJlZ2lzdHJhTGVtYnJldGUsIGxlTGVtYnJldGVzLFxyXG4gIGFwYWdhTGVtYnJldGUsIGNyaXB0b2dyYWZhU2VuaGEgfSBmcm9tICcuL3BlcnNpc3RlbmNpYSdcclxuXHJcbmltcG9ydCB7IGdlcmFUb2tlbiwgdmFsaWRhVG9rZW4gfSBmcm9tICcuL2p3dF91dGlsJ1xyXG5cclxuY29uc3QgUE9SVEEgPSBwcm9jZXNzLmVudi5QT1JUQVxyXG5jb25zdCBvcGNvZXMgPSB7XHJcbiAga2V5OiBmcy5yZWFkRmlsZVN5bmMocGF0aC5yZXNvbHZlKF9fZGlybmFtZSwgJy4uL2NlcnQva2V5LnBlbScpKSxcclxuICBjZXJ0OiBmcy5yZWFkRmlsZVN5bmMocGF0aC5yZXNvbHZlKF9fZGlybmFtZSwgJy4uL2NlcnQvY2VydC5wZW0nKSlcclxufVxyXG5cclxuY29uc3QgYXBwID0gZXhwcmVzcygpXHJcblxyXG5hcHAudXNlKGJvZHlQYXJzZXIuanNvbigpKVxyXG5hcHAudXNlKGhlbG1ldCgpKVxyXG5cclxuYXBwLnVzZShleHByZXNzLnN0YXRpYyhwYXRoLnJlc29sdmUoX19kaXJuYW1lLCAnLi4vcHVibGljbycpKSlcclxuXHJcbmFwcC5wb3N0KCcvY21kRmFjYUxvZ2luJywgKHJlcSwgcmVzKSA9PiB7XHJcbiAgY29uc3QgeyBsb2dpbiwgc2VuaGEgfSA9IHJlcS5ib2R5XHJcbiAgY29uc3Qgc2VuaGFDcmlwdG9ncmFmYWRhID0gY3JpcHRvZ3JhZmFTZW5oYShzZW5oYSlcclxuXHJcbiAgbGVVc3VhcmlvKGxvZ2luKVxyXG4gICAgLnRoZW4odXN1YXJpbyA9PiB7XHJcbiAgICAgIGlmICh1c3VhcmlvICE9PSBudWxsICYmIHVzdWFyaW8uc2VuaGEgPT09IHNlbmhhQ3JpcHRvZ3JhZmFkYSkge1xyXG4gICAgICAgIHJlcy5qc29uKHsgb2s6IHRydWUsIHRva2VuOiBnZXJhVG9rZW4obG9naW4pIH0pXHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmVzLmpzb24oeyBvazogZmFsc2UsIG1lc3NhZ2U6ICdsb2dpbiBlL291IHNlbmhhIGludsOhbGlkb3MnIH0pXHJcbiAgICAgIH1cclxuICAgIH0pXHJcbiAgICAuY2F0Y2goZXJybyA9PiB7XHJcbiAgICAgIHJlcy5qc29uKHsgb2s6IGZhbHNlLCBtZXNzYWdlOiBlcnJvLm1lc3NhZ2UgfSlcclxuICAgIH0pXHJcbn0pXHJcblxyXG5hcHAucG9zdCgnL2NtZEZhY2FDYWRhc3RybycsIChyZXEsIHJlcykgPT4ge1xyXG4gIGNvbnN0IHsgbG9naW4sIHNlbmhhIH0gPSByZXEuYm9keVxyXG4gIGNvbnN0IHNlbmhhQ3JpcHRvZ3JhZmFkYSA9IGNyaXB0b2dyYWZhU2VuaGEoc2VuaGEpXHJcblxyXG4gIGNhZGFzdHJhVXN1YXJpbyhsb2dpbiwgc2VuaGFDcmlwdG9ncmFmYWRhKVxyXG4gICAgLnRoZW4ocmVzdWx0YWRvID0+IHtcclxuICAgICAgaWYgKHJlc3VsdGFkbykge1xyXG4gICAgICAgIHJlcy5qc29uKHsgb2s6IHRydWUsIHRva2VuOiBnZXJhVG9rZW4obG9naW4pIH0pXHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmVzLmpzb24oeyBvazogZmFsc2UsIG1lc3NhZ2U6ICdMb2dpbiBqw6EgZm9pIGNhZGFzdHJhZG8nIH0pXHJcbiAgICAgIH1cclxuICAgIH0pXHJcbiAgICAuY2F0Y2goZXJybyA9PiB7XHJcbiAgICAgIHJlcy5qc29uKHsgb2s6IGZhbHNlLCBtZXNzYWdlOiBlcnJvLm1lc3NhZ2UgfSlcclxuICAgIH0pXHJcbn0pXHJcblxyXG5hcHAucG9zdCgnL2NtZFB1YmxpcXVlTGVtYnJldGUnLCAocmVxLCByZXMpID0+IHtcclxuICBjb25zdCB7IHRleHRvLCB0b2tlbiB9ID0gcmVxLmJvZHlcclxuICBjb25zdCBkYWRvc1Rva2VuID0gdmFsaWRhVG9rZW4odG9rZW4pXHJcbiAgaWYgKGRhZG9zVG9rZW4gIT09IG51bGwpIHtcclxuICAgIHJlZ2lzdHJhTGVtYnJldGUoZGFkb3NUb2tlbi5sb2dpbiwgdGV4dG8pXHJcbiAgICAgIC50aGVuKGlkUmVnaXN0cmFkbyA9PiB7XHJcbiAgICAgICAgcmVzLmpzb24oeyBvazogdHJ1ZSwgaWRSZWdpc3RyYWRvIH0pXHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaChlcnJvID0+IHtcclxuICAgICAgICByZXMuanNvbih7IG9rOiBmYWxzZSwgbWVzc2FnZTogZXJyby5tZXNzYWdlIH0pXHJcbiAgICAgIH0pXHJcbiAgfSBlbHNlIHtcclxuICAgIHJlcy5qc29uKHsgb2s6IGZhbHNlLCBtZXNzYWdlOiAndG9rZW4gaW52w6FsaWRvJyB9KVxyXG4gIH1cclxufSlcclxuXHJcbmFwcC5kZWxldGUoJy9jbWRBcGFndWVMZW1icmV0ZScsIChyZXEsIHJlcykgPT4ge1xyXG4gIGNvbnN0IHsgaWRMZW1icmV0ZSwgdG9rZW4gfSA9IHJlcS5ib2R5XHJcbiAgY29uc3QgZGFkb3NUb2tlbiA9IHZhbGlkYVRva2VuKHRva2VuKVxyXG4gIGlmIChkYWRvc1Rva2VuICE9PSBudWxsKSB7XHJcbiAgICBhcGFnYUxlbWJyZXRlKGlkTGVtYnJldGUpXHJcbiAgICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgICByZXMuanNvbih7IG9rOiB0cnVlIH0pXHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaChlcnJvID0+IHtcclxuICAgICAgICByZXMuanNvbih7IG9rOiBmYWxzZSwgbWVzc2FnZTogZXJyby5tZXNzYWdlIH0pXHJcbiAgICAgIH0pXHJcbiAgfSBlbHNlIHtcclxuICAgIHJlcy5qc29uKHsgb2s6IGZhbHNlLCBtZXNzYWdlOiAndG9rZW4gaW52w6FsaWRvJyB9KVxyXG4gIH1cclxufSlcclxuXHJcbmFwcC5nZXQoJy9xcnlMZWlhTGVtYnJldGVzJywgKHJlcSwgcmVzKSA9PiB7XHJcbiAgY29uc3QgeyB0b2tlbiB9ID0gSlNPTi5wYXJzZShyZXEucXVlcnkuZGFkb3MpXHJcbiAgY29uc3QgZGFkb3NUb2tlbiA9IHZhbGlkYVRva2VuKHRva2VuKVxyXG4gIGlmIChkYWRvc1Rva2VuICE9PSBudWxsKSB7XHJcbiAgICBsZUxlbWJyZXRlcyhkYWRvc1Rva2VuLmxvZ2luKVxyXG4gICAgICAudGhlbihsZW1icmV0ZXMgPT4ge1xyXG4gICAgICAgIHJlcy5qc29uKHsgb2s6IHRydWUsIGxlbWJyZXRlcyB9KVxyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goZXJybyA9PiB7XHJcbiAgICAgICAgcmVzLmpzb24oeyBvazogZmFsc2UsIG1lc3NhZ2U6IGVycm8ubWVzc2FnZSB9KVxyXG4gICAgICB9KVxyXG4gIH0gZWxzZSB7XHJcbiAgICByZXMuanNvbih7IG9rOiBmYWxzZSwgbWVzc2FnZTogJ3Rva2VuIGludsOhbGlkbycgfSlcclxuICB9XHJcbn0pXHJcblxyXG5jb25zdCBzZXJ2ZXIgPSBodHRwcy5jcmVhdGVTZXJ2ZXIob3Bjb2VzLCBhcHApXHJcblxyXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc29sZVxyXG5zZXJ2ZXIubGlzdGVuKFBPUlRBLCAoKSA9PiBjb25zb2xlLmxvZyhgU2Vydmlkb3Igbm8gYXIgbmEgcG9ydGEgJHtQT1JUQX0uLi5gKSlcclxuIl19",
    "map": {
      "version": 3,
      "sources": [
        "app.js"
      ],
      "names": [
        "PORTA",
        "process",
        "env",
        "opcoes",
        "key",
        "fs",
        "readFileSync",
        "path",
        "resolve",
        "__dirname",
        "cert",
        "app",
        "use",
        "bodyParser",
        "json",
        "express",
        "static",
        "post",
        "req",
        "res",
        "login",
        "senha",
        "body",
        "senhaCriptografada",
        "then",
        "usuario",
        "ok",
        "token",
        "message",
        "catch",
        "erro",
        "resultado",
        "texto",
        "dadosToken",
        "idRegistrado",
        "delete",
        "idLembrete",
        "get",
        "JSON",
        "parse",
        "query",
        "dados",
        "lembretes",
        "server",
        "https",
        "createServer",
        "listen",
        "console",
        "log"
      ],
      "mappings": "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",
      "sourceRoot": "C:\\Users\\alan.ensina\\Desktop\\Alan\\github\\web-programing\\05-app_lembretes\\servidor\\src",
      "sourcesContent": [
        "import './env'\r\n\r\nimport https from 'https'\r\nimport fs from 'fs'\r\nimport path from 'path'\r\nimport express from 'express'\r\nimport bodyParser from 'body-parser'\r\nimport helmet from 'helmet'\r\n\r\nimport {\r\n  leUsuario, cadastraUsuario,\r\n  registraLembrete, leLembretes,\r\n  apagaLembrete, criptografaSenha } from './persistencia'\r\n\r\nimport { geraToken, validaToken } from './jwt_util'\r\n\r\nconst PORTA = process.env.PORTA\r\nconst opcoes = {\r\n  key: fs.readFileSync(path.resolve(__dirname, '../cert/key.pem')),\r\n  cert: fs.readFileSync(path.resolve(__dirname, '../cert/cert.pem'))\r\n}\r\n\r\nconst app = express()\r\n\r\napp.use(bodyParser.json())\r\napp.use(helmet())\r\n\r\napp.use(express.static(path.resolve(__dirname, '../publico')))\r\n\r\napp.post('/cmdFacaLogin', (req, res) => {\r\n  const { login, senha } = req.body\r\n  const senhaCriptografada = criptografaSenha(senha)\r\n\r\n  leUsuario(login)\r\n    .then(usuario => {\r\n      if (usuario !== null && usuario.senha === senhaCriptografada) {\r\n        res.json({ ok: true, token: geraToken(login) })\r\n      } else {\r\n        res.json({ ok: false, message: 'login e/ou senha inválidos' })\r\n      }\r\n    })\r\n    .catch(erro => {\r\n      res.json({ ok: false, message: erro.message })\r\n    })\r\n})\r\n\r\napp.post('/cmdFacaCadastro', (req, res) => {\r\n  const { login, senha } = req.body\r\n  const senhaCriptografada = criptografaSenha(senha)\r\n\r\n  cadastraUsuario(login, senhaCriptografada)\r\n    .then(resultado => {\r\n      if (resultado) {\r\n        res.json({ ok: true, token: geraToken(login) })\r\n      } else {\r\n        res.json({ ok: false, message: 'Login já foi cadastrado' })\r\n      }\r\n    })\r\n    .catch(erro => {\r\n      res.json({ ok: false, message: erro.message })\r\n    })\r\n})\r\n\r\napp.post('/cmdPubliqueLembrete', (req, res) => {\r\n  const { texto, token } = req.body\r\n  const dadosToken = validaToken(token)\r\n  if (dadosToken !== null) {\r\n    registraLembrete(dadosToken.login, texto)\r\n      .then(idRegistrado => {\r\n        res.json({ ok: true, idRegistrado })\r\n      })\r\n      .catch(erro => {\r\n        res.json({ ok: false, message: erro.message })\r\n      })\r\n  } else {\r\n    res.json({ ok: false, message: 'token inválido' })\r\n  }\r\n})\r\n\r\napp.delete('/cmdApagueLembrete', (req, res) => {\r\n  const { idLembrete, token } = req.body\r\n  const dadosToken = validaToken(token)\r\n  if (dadosToken !== null) {\r\n    apagaLembrete(idLembrete)\r\n      .then(() => {\r\n        res.json({ ok: true })\r\n      })\r\n      .catch(erro => {\r\n        res.json({ ok: false, message: erro.message })\r\n      })\r\n  } else {\r\n    res.json({ ok: false, message: 'token inválido' })\r\n  }\r\n})\r\n\r\napp.get('/qryLeiaLembretes', (req, res) => {\r\n  const { token } = JSON.parse(req.query.dados)\r\n  const dadosToken = validaToken(token)\r\n  if (dadosToken !== null) {\r\n    leLembretes(dadosToken.login)\r\n      .then(lembretes => {\r\n        res.json({ ok: true, lembretes })\r\n      })\r\n      .catch(erro => {\r\n        res.json({ ok: false, message: erro.message })\r\n      })\r\n  } else {\r\n    res.json({ ok: false, message: 'token inválido' })\r\n  }\r\n})\r\n\r\nconst server = https.createServer(opcoes, app)\r\n\r\n// eslint-disable-next-line no-console\r\nserver.listen(PORTA, () => console.log(`Servidor no ar na porta ${PORTA}...`))\r\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1556891673564
  },
  "{\"sourceRoot\":\"C:\\\\Users\\\\alan.ensina\\\\Desktop\\\\Alan\\\\github\\\\web-programing\\\\05-app_lembretes\\\\servidor\\\\src\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\Users\\\\alan.ensina\\\\Desktop\\\\Alan\\\\github\\\\web-programing\\\\05-app_lembretes\\\\servidor\",\"filename\":\"C:\\\\Users\\\\alan.ensina\\\\Desktop\\\\Alan\\\\github\\\\web-programing\\\\05-app_lembretes\\\\servidor\\\\src\\\\env.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\Users\\\\alan.ensina\\\\Desktop\\\\Alan\\\\github\\\\web-programing\\\\05-app_lembretes\\\\servidor\",\"plugins\":[{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.4.4": {
    "metadata": {},
    "options": {
      "sourceRoot": "C:\\Users\\alan.ensina\\Desktop\\Alan\\github\\web-programing\\05-app_lembretes\\servidor\\src",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "C:\\Users\\alan.ensina\\Desktop\\Alan\\github\\web-programing\\05-app_lembretes\\servidor",
      "filename": "C:\\Users\\alan.ensina\\Desktop\\Alan\\github\\web-programing\\05-app_lembretes\\servidor\\src\\env.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "C:\\Users\\alan.ensina\\Desktop\\Alan\\github\\web-programing\\05-app_lembretes\\servidor",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "loose": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "C:\\Users\\alan.ensina\\Desktop\\Alan\\github\\web-programing\\05-app_lembretes\\servidor\\src\\env.js",
        "plugins": [
          "asyncGenerators",
          "objectRestSpread",
          "jsonStrings",
          "optionalCatchBinding"
        ]
      },
      "generatorOpts": {
        "filename": "C:\\Users\\alan.ensina\\Desktop\\Alan\\github\\web-programing\\05-app_lembretes\\servidor\\src\\env.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "C:\\Users\\alan.ensina\\Desktop\\Alan\\github\\web-programing\\05-app_lembretes\\servidor\\src",
        "sourceFileName": "env.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nvar _dotenv = _interopRequireDefault(require(\"dotenv\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/* eslint-disable no-console */\n_dotenv.default.config(); // Variáveis de ambiente, acessadas via process.env, devem ser\n// definidas no arquivo .env.\n// verificar se todas as variáveis de ambiestão definidas\n\n\nlet todasDefinidas = true;\n\nif (process.env.PORTA === undefined) {\n  console.log('Falta definir variável PORTA no arquivo .env');\n  todasDefinidas = false;\n}\n\nif (process.env.BD_URL === undefined) {\n  console.log('Falta definir variável BD_URL no arquivo .env');\n  todasDefinidas = false;\n}\n\nif (process.env.SENHA_JWT === undefined) {\n  console.log('Falta definir variável SENHA_JWT no arquivo .env');\n  todasDefinidas = false;\n}\n\nif (process.env.SALT === undefined) {\n  console.log('Falta definir variável SALT no arquivo .env');\n  todasDefinidas = false;\n}\n\nif (!todasDefinidas) {\n  process.exit(1);\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImVudi5qcyJdLCJuYW1lcyI6WyJkb3RlbnYiLCJjb25maWciLCJ0b2Rhc0RlZmluaWRhcyIsInByb2Nlc3MiLCJlbnYiLCJQT1JUQSIsInVuZGVmaW5lZCIsImNvbnNvbGUiLCJsb2ciLCJCRF9VUkwiLCJTRU5IQV9KV1QiLCJTQUxUIiwiZXhpdCJdLCJtYXBwaW5ncyI6Ijs7QUFDQTs7OztBQURBO0FBR0FBLGdCQUFPQyxNQUFQLEcsQ0FFQTtBQUNBO0FBRUE7OztBQUVBLElBQUlDLGNBQWMsR0FBRyxJQUFyQjs7QUFFQSxJQUFJQyxPQUFPLENBQUNDLEdBQVIsQ0FBWUMsS0FBWixLQUFzQkMsU0FBMUIsRUFBcUM7QUFDbkNDLEVBQUFBLE9BQU8sQ0FBQ0MsR0FBUixDQUFZLDhDQUFaO0FBQ0FOLEVBQUFBLGNBQWMsR0FBRyxLQUFqQjtBQUNEOztBQUVELElBQUlDLE9BQU8sQ0FBQ0MsR0FBUixDQUFZSyxNQUFaLEtBQXVCSCxTQUEzQixFQUFzQztBQUNwQ0MsRUFBQUEsT0FBTyxDQUFDQyxHQUFSLENBQVksK0NBQVo7QUFDQU4sRUFBQUEsY0FBYyxHQUFHLEtBQWpCO0FBQ0Q7O0FBRUQsSUFBSUMsT0FBTyxDQUFDQyxHQUFSLENBQVlNLFNBQVosS0FBMEJKLFNBQTlCLEVBQXlDO0FBQ3ZDQyxFQUFBQSxPQUFPLENBQUNDLEdBQVIsQ0FBWSxrREFBWjtBQUNBTixFQUFBQSxjQUFjLEdBQUcsS0FBakI7QUFDRDs7QUFFRCxJQUFJQyxPQUFPLENBQUNDLEdBQVIsQ0FBWU8sSUFBWixLQUFxQkwsU0FBekIsRUFBb0M7QUFDbENDLEVBQUFBLE9BQU8sQ0FBQ0MsR0FBUixDQUFZLDZDQUFaO0FBQ0FOLEVBQUFBLGNBQWMsR0FBRyxLQUFqQjtBQUNEOztBQUVELElBQUksQ0FBQ0EsY0FBTCxFQUFxQjtBQUNuQkMsRUFBQUEsT0FBTyxDQUFDUyxJQUFSLENBQWEsQ0FBYjtBQUNEIiwic291cmNlUm9vdCI6IkM6XFxVc2Vyc1xcYWxhbi5lbnNpbmFcXERlc2t0b3BcXEFsYW5cXGdpdGh1Ylxcd2ViLXByb2dyYW1pbmdcXDA1LWFwcF9sZW1icmV0ZXNcXHNlcnZpZG9yXFxzcmMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiBlc2xpbnQtZGlzYWJsZSBuby1jb25zb2xlICovXHJcbmltcG9ydCBkb3RlbnYgZnJvbSAnZG90ZW52J1xyXG5cclxuZG90ZW52LmNvbmZpZygpXHJcblxyXG4vLyBWYXJpw6F2ZWlzIGRlIGFtYmllbnRlLCBhY2Vzc2FkYXMgdmlhIHByb2Nlc3MuZW52LCBkZXZlbSBzZXJcclxuLy8gZGVmaW5pZGFzIG5vIGFycXVpdm8gLmVudi5cclxuXHJcbi8vIHZlcmlmaWNhciBzZSB0b2RhcyBhcyB2YXJpw6F2ZWlzIGRlIGFtYmllc3TDo28gZGVmaW5pZGFzXHJcblxyXG5sZXQgdG9kYXNEZWZpbmlkYXMgPSB0cnVlXHJcblxyXG5pZiAocHJvY2Vzcy5lbnYuUE9SVEEgPT09IHVuZGVmaW5lZCkge1xyXG4gIGNvbnNvbGUubG9nKCdGYWx0YSBkZWZpbmlyIHZhcmnDoXZlbCBQT1JUQSBubyBhcnF1aXZvIC5lbnYnKVxyXG4gIHRvZGFzRGVmaW5pZGFzID0gZmFsc2VcclxufVxyXG5cclxuaWYgKHByb2Nlc3MuZW52LkJEX1VSTCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgY29uc29sZS5sb2coJ0ZhbHRhIGRlZmluaXIgdmFyacOhdmVsIEJEX1VSTCBubyBhcnF1aXZvIC5lbnYnKVxyXG4gIHRvZGFzRGVmaW5pZGFzID0gZmFsc2VcclxufVxyXG5cclxuaWYgKHByb2Nlc3MuZW52LlNFTkhBX0pXVCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgY29uc29sZS5sb2coJ0ZhbHRhIGRlZmluaXIgdmFyacOhdmVsIFNFTkhBX0pXVCBubyBhcnF1aXZvIC5lbnYnKVxyXG4gIHRvZGFzRGVmaW5pZGFzID0gZmFsc2VcclxufVxyXG5cclxuaWYgKHByb2Nlc3MuZW52LlNBTFQgPT09IHVuZGVmaW5lZCkge1xyXG4gIGNvbnNvbGUubG9nKCdGYWx0YSBkZWZpbmlyIHZhcmnDoXZlbCBTQUxUIG5vIGFycXVpdm8gLmVudicpXHJcbiAgdG9kYXNEZWZpbmlkYXMgPSBmYWxzZVxyXG59XHJcblxyXG5pZiAoIXRvZGFzRGVmaW5pZGFzKSB7XHJcbiAgcHJvY2Vzcy5leGl0KDEpXHJcbn1cclxuIl19",
    "map": {
      "version": 3,
      "sources": [
        "env.js"
      ],
      "names": [
        "dotenv",
        "config",
        "todasDefinidas",
        "process",
        "env",
        "PORTA",
        "undefined",
        "console",
        "log",
        "BD_URL",
        "SENHA_JWT",
        "SALT",
        "exit"
      ],
      "mappings": ";;AACA;;;;AADA;AAGAA,gBAAOC,MAAP,G,CAEA;AACA;AAEA;;;AAEA,IAAIC,cAAc,GAAG,IAArB;;AAEA,IAAIC,OAAO,CAACC,GAAR,CAAYC,KAAZ,KAAsBC,SAA1B,EAAqC;AACnCC,EAAAA,OAAO,CAACC,GAAR,CAAY,8CAAZ;AACAN,EAAAA,cAAc,GAAG,KAAjB;AACD;;AAED,IAAIC,OAAO,CAACC,GAAR,CAAYK,MAAZ,KAAuBH,SAA3B,EAAsC;AACpCC,EAAAA,OAAO,CAACC,GAAR,CAAY,+CAAZ;AACAN,EAAAA,cAAc,GAAG,KAAjB;AACD;;AAED,IAAIC,OAAO,CAACC,GAAR,CAAYM,SAAZ,KAA0BJ,SAA9B,EAAyC;AACvCC,EAAAA,OAAO,CAACC,GAAR,CAAY,kDAAZ;AACAN,EAAAA,cAAc,GAAG,KAAjB;AACD;;AAED,IAAIC,OAAO,CAACC,GAAR,CAAYO,IAAZ,KAAqBL,SAAzB,EAAoC;AAClCC,EAAAA,OAAO,CAACC,GAAR,CAAY,6CAAZ;AACAN,EAAAA,cAAc,GAAG,KAAjB;AACD;;AAED,IAAI,CAACA,cAAL,EAAqB;AACnBC,EAAAA,OAAO,CAACS,IAAR,CAAa,CAAb;AACD",
      "sourceRoot": "C:\\Users\\alan.ensina\\Desktop\\Alan\\github\\web-programing\\05-app_lembretes\\servidor\\src",
      "sourcesContent": [
        "/* eslint-disable no-console */\r\nimport dotenv from 'dotenv'\r\n\r\ndotenv.config()\r\n\r\n// Variáveis de ambiente, acessadas via process.env, devem ser\r\n// definidas no arquivo .env.\r\n\r\n// verificar se todas as variáveis de ambiestão definidas\r\n\r\nlet todasDefinidas = true\r\n\r\nif (process.env.PORTA === undefined) {\r\n  console.log('Falta definir variável PORTA no arquivo .env')\r\n  todasDefinidas = false\r\n}\r\n\r\nif (process.env.BD_URL === undefined) {\r\n  console.log('Falta definir variável BD_URL no arquivo .env')\r\n  todasDefinidas = false\r\n}\r\n\r\nif (process.env.SENHA_JWT === undefined) {\r\n  console.log('Falta definir variável SENHA_JWT no arquivo .env')\r\n  todasDefinidas = false\r\n}\r\n\r\nif (process.env.SALT === undefined) {\r\n  console.log('Falta definir variável SALT no arquivo .env')\r\n  todasDefinidas = false\r\n}\r\n\r\nif (!todasDefinidas) {\r\n  process.exit(1)\r\n}\r\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1556891673565
  },
  "{\"sourceRoot\":\"C:\\\\Users\\\\alan.ensina\\\\Desktop\\\\Alan\\\\github\\\\web-programing\\\\05-app_lembretes\\\\servidor\\\\src\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\Users\\\\alan.ensina\\\\Desktop\\\\Alan\\\\github\\\\web-programing\\\\05-app_lembretes\\\\servidor\",\"filename\":\"C:\\\\Users\\\\alan.ensina\\\\Desktop\\\\Alan\\\\github\\\\web-programing\\\\05-app_lembretes\\\\servidor\\\\src\\\\persistencia.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\Users\\\\alan.ensina\\\\Desktop\\\\Alan\\\\github\\\\web-programing\\\\05-app_lembretes\\\\servidor\",\"plugins\":[{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.4.4": {
    "metadata": {},
    "options": {
      "sourceRoot": "C:\\Users\\alan.ensina\\Desktop\\Alan\\github\\web-programing\\05-app_lembretes\\servidor\\src",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "C:\\Users\\alan.ensina\\Desktop\\Alan\\github\\web-programing\\05-app_lembretes\\servidor",
      "filename": "C:\\Users\\alan.ensina\\Desktop\\Alan\\github\\web-programing\\05-app_lembretes\\servidor\\src\\persistencia.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "C:\\Users\\alan.ensina\\Desktop\\Alan\\github\\web-programing\\05-app_lembretes\\servidor",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "loose": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "C:\\Users\\alan.ensina\\Desktop\\Alan\\github\\web-programing\\05-app_lembretes\\servidor\\src\\persistencia.js",
        "plugins": [
          "asyncGenerators",
          "objectRestSpread",
          "jsonStrings",
          "optionalCatchBinding"
        ]
      },
      "generatorOpts": {
        "filename": "C:\\Users\\alan.ensina\\Desktop\\Alan\\github\\web-programing\\05-app_lembretes\\servidor\\src\\persistencia.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "C:\\Users\\alan.ensina\\Desktop\\Alan\\github\\web-programing\\05-app_lembretes\\servidor\\src",
        "sourceFileName": "persistencia.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.leUsuario = leUsuario;\nexports.cadastraUsuario = cadastraUsuario;\nexports.registraLembrete = registraLembrete;\nexports.leLembretes = leLembretes;\nexports.apagaLembrete = apagaLembrete;\nexports.criptografaSenha = criptografaSenha;\n\nvar _mongodb = _interopRequireDefault(require(\"mongodb\"));\n\nvar _crypto = _interopRequireDefault(require(\"crypto\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/* eslint-disable no-console */\n//FIXME Descomente para importar o módulo crypto\nconst BD_URL = process.env.BD_URL;\nlet client;\nlet db;\n\n(async function () {\n  try {\n    client = await _mongodb.default.connect(BD_URL, {\n      useNewUrlParser: true\n    });\n    db = client.db();\n    console.log('conectou com o banco...');\n    process.on('SIGINT', () => {\n      client.close();\n      console.log('desconectou do banco...');\n      process.exit();\n    });\n  } catch (e) {\n    console.log(e);\n    console.log('não conseguiu conexão com o banco');\n    process.exit(1);\n  }\n})();\n\nfunction criptografaSenha(senha) {\n  //FIXME Use o método scryptSync definido no módulo crypto do Node para\n  // criptografar a senha informada pelo usuário. Consulte a documentação do Node.\n  var crypto = require('crypto');\n\n  var novaSenha = crypto.createHash('md5').update(senha).digest('hex');\n  return novaSenha;\n}\n\nconst COL_USUARIOS = 'usuarios';\nconst COL_LEMBRETES = 'lembretes';\n\nasync function leUsuario(login) {\n  const col = db.collection(COL_USUARIOS);\n  const usuario = await col.findOne({\n    login\n  });\n\n  if (usuario) {\n    return usuario;\n  } else {\n    return null;\n  }\n}\n\nasync function cadastraUsuario(login, senha) {\n  const usuario = await leUsuario(login);\n\n  if (usuario !== null) {\n    return false;\n  } else {\n    const col = db.collection(COL_USUARIOS);\n    await col.insertOne({\n      login,\n      senha\n    });\n    return true;\n  }\n}\n\nasync function registraLembrete(login, texto) {\n  const col = db.collection(COL_LEMBRETES);\n  const resultado = await col.insertOne({\n    login,\n    texto\n  });\n  return resultado.insertedId;\n}\n\nasync function leLembretes(login) {\n  const col = db.collection(COL_LEMBRETES);\n  const resultado = await col.find({\n    login\n  });\n  const resultadoComoArray = await resultado.toArray();\n  return resultadoComoArray;\n}\n\nasync function apagaLembrete(idLembrete) {\n  const col = db.collection(COL_LEMBRETES);\n  const r = await col.deleteOne({\n    _id: new _mongodb.default.ObjectId(idLembrete)\n  });\n\n  if (r.deletedCount === 0) {\n    throw new Error('não conseguiu remover lembrete');\n  }\n\n  return true;\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBlcnNpc3RlbmNpYS5qcyJdLCJuYW1lcyI6WyJCRF9VUkwiLCJwcm9jZXNzIiwiZW52IiwiY2xpZW50IiwiZGIiLCJNb25nb0NsaWVudCIsImNvbm5lY3QiLCJ1c2VOZXdVcmxQYXJzZXIiLCJjb25zb2xlIiwibG9nIiwib24iLCJjbG9zZSIsImV4aXQiLCJlIiwiY3JpcHRvZ3JhZmFTZW5oYSIsInNlbmhhIiwiY3J5cHRvIiwicmVxdWlyZSIsIm5vdmFTZW5oYSIsImNyZWF0ZUhhc2giLCJ1cGRhdGUiLCJkaWdlc3QiLCJDT0xfVVNVQVJJT1MiLCJDT0xfTEVNQlJFVEVTIiwibGVVc3VhcmlvIiwibG9naW4iLCJjb2wiLCJjb2xsZWN0aW9uIiwidXN1YXJpbyIsImZpbmRPbmUiLCJjYWRhc3RyYVVzdWFyaW8iLCJpbnNlcnRPbmUiLCJyZWdpc3RyYUxlbWJyZXRlIiwidGV4dG8iLCJyZXN1bHRhZG8iLCJpbnNlcnRlZElkIiwibGVMZW1icmV0ZXMiLCJmaW5kIiwicmVzdWx0YWRvQ29tb0FycmF5IiwidG9BcnJheSIsImFwYWdhTGVtYnJldGUiLCJpZExlbWJyZXRlIiwiciIsImRlbGV0ZU9uZSIsIl9pZCIsIk9iamVjdElkIiwiZGVsZXRlZENvdW50IiwiRXJyb3IiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztBQUNBOztBQUVBOzs7O0FBSEE7QUFFQTtBQUdBLE1BQU1BLE1BQU0sR0FBR0MsT0FBTyxDQUFDQyxHQUFSLENBQVlGLE1BQTNCO0FBQ0EsSUFBSUcsTUFBSjtBQUNBLElBQUlDLEVBQUo7O0FBRUEsQ0FBQyxrQkFBa0I7QUFDakIsTUFBSTtBQUNGRCxJQUFBQSxNQUFNLEdBQUcsTUFBTUUsaUJBQVlDLE9BQVosQ0FBb0JOLE1BQXBCLEVBQTRCO0FBQUVPLE1BQUFBLGVBQWUsRUFBRTtBQUFuQixLQUE1QixDQUFmO0FBQ0FILElBQUFBLEVBQUUsR0FBR0QsTUFBTSxDQUFDQyxFQUFQLEVBQUw7QUFDQUksSUFBQUEsT0FBTyxDQUFDQyxHQUFS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QUFBQSxHQUFHLEVBQUUsSUFBSXZDLGlCQUFZd0MsUUFBaEIsQ0FBeUJKLFVBQXpCO0FBQVAsR0FBZCxDQUFoQjs7QUFDQSxNQUFJQyxDQUFDLENBQUNJLFlBQUYsS0FBbUIsQ0FBdkIsRUFBMEI7QUFDeEIsVUFBTSxJQUFJQyxLQUFKLENBQVUsZ0NBQVYsQ0FBTjtBQUNEOztBQUNELFNBQU8sSUFBUDtBQUNEIiwic291cmNlUm9vdCI6IkM6XFxVc2Vyc1xcYWxhbi5lbnNpbmFcXERlc2t0b3BcXEFsYW5cXGdpdGh1Ylxcd2ViLXByb2dyYW1pbmdcXDA1LWFwcF9sZW1icmV0ZXNcXHNlcnZpZG9yXFxzcmMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiBlc2xpbnQtZGlzYWJsZSBuby1jb25zb2xlICovXHJcbmltcG9ydCBNb25nb0NsaWVudCBmcm9tICdtb25nb2RiJ1xyXG4vL0ZJWE1FIERlc2NvbWVudGUgcGFyYSBpbXBvcnRhciBvIG3Ds2R1bG8gY3J5cHRvXHJcbmltcG9ydCBjcnlwdG8gZnJvbSAnY3J5cHRvJ1xyXG5cclxuY29uc3QgQkRfVVJMID0gcHJvY2Vzcy5lbnYuQkRfVVJMXHJcbmxldCBjbGllbnRcclxubGV0IGRiXHJcblxyXG4oYXN5bmMgZnVuY3Rpb24gKCkge1xyXG4gIHRyeSB7XHJcbiAgICBjbGllbnQgPSBhd2FpdCBNb25nb0NsaWVudC5jb25uZWN0KEJEX1VSTCwgeyB1c2VOZXdVcmxQYXJzZXI6IHRydWUgfSlcclxuICAgIGRiID0gY2xpZW50LmRiKClcclxuICAgIGNvbnNvbGUubG9nKCdjb25lY3RvdSBjb20gbyBiYW5jby4uLicpXHJcbiAgICBwcm9jZXNzLm9uKCdTSUdJTlQnLCAoKSA9PiB7XHJcbiAgICAgIGNsaWVudC5jbG9zZSgpXHJcbiAgICAgIGNvbnNvbGUubG9nKCdkZXNjb25lY3RvdSBkbyBiYW5jby4uLicpXHJcbiAgICAgIHByb2Nlc3MuZXhpdCgpXHJcbiAgICB9KVxyXG4gIH0gY2F0Y2ggKGUpIHtcclxuICAgIGNvbnNvbGUubG9nKGUpXHJcbiAgICBjb25zb2xlLmxvZygnbsOjbyBjb25zZWd1aXUgY29uZXjDo28gY29tIG8gYmFuY28nKVxyXG4gICAgcHJvY2Vzcy5leGl0KDEpXHJcbiAgfVxyXG59KSgpXHJcblxyXG5mdW5jdGlvbiBjcmlwdG9ncmFmYVNlbmhhIChzZW5oYSkge1xyXG4gIC8vRklYTUUgVXNlIG8gbcOpdG9kbyBzY3J5cHRTeW5jIGRlZmluaWRvIG5vIG3Ds2R1bG8gY3J5cHRvIGRvIE5vZGUgcGFyYVxyXG4gIC8vIGNyaXB0b2dyYWZhciBhIHNlbmhhIGluZm9ybWFkYSBwZWxvIHVzdcOhcmlvLiBDb25zdWx0ZSBhIGRvY3VtZW50YcOnw6NvIGRvIE5vZGUuXHJcbnZhciBjcnlwdG8gPSByZXF1aXJlKCdjcnlwdG8nKVxyXG52YXIgbm92YVNlbmhhID0gY3J5cHRvLmNyZWF0ZUhhc2goJ21kNScpLnVwZGF0ZShzZW5oYSkuZGlnZXN0KCdoZXgnKVxyXG5cclxuICByZXR1cm4gbm92YVNlbmhhXHJcbn1cclxuXHJcbmNvbnN0IENPTF9VU1VBUklPUyA9ICd1c3VhcmlvcydcclxuY29uc3QgQ09MX0xFTUJSRVRFUyA9ICdsZW1icmV0ZXMnXHJcblxyXG5hc3luYyBmdW5jdGlvbiBsZVVzdWFyaW8gKGxvZ2luKSB7XHJcbiAgY29uc3QgY29sID0gZGIuY29sbGVjdGlvbihDT0xfVVNVQVJJT1MpXHJcbiAgY29uc3QgdXN1YXJpbyA9IGF3YWl0IGNvbC5maW5kT25lKHsgbG9naW4gfSlcclxuICBpZiAodXN1YXJpbykge1xyXG4gICAgcmV0dXJuIHVzdWFyaW9cclxuICB9IGVsc2Uge1xyXG4gICAgcmV0dXJuIG51bGxcclxuICB9XHJcbn1cclxuXHJcbmFzeW5jIGZ1bmN0aW9uIGNhZGFzdHJhVXN1YXJpbyAobG9naW4sIHNlbmhhKSB7XHJcbiAgY29uc3QgdXN1YXJpbyA9IGF3YWl0IGxlVXN1YXJpbyhsb2dpbilcclxuICBpZiAodXN1YXJpbyAhPT0gbnVsbCkge1xyXG4gICAgcmV0dXJuIGZhbHNlXHJcbiAgfSBlbHNlIHtcclxuICAgIGNvbnN0IGNvbCA9IGRiLmNvbGxlY3Rpb24oQ09MX1VTVUFSSU9TKVxyXG4gICAgYXdhaXQgY29sLmluc2VydE9uZSh7IGxvZ2luLCBzZW5oYSB9KVxyXG4gICAgcmV0dXJuIHRydWVcclxuICB9XHJcbn1cclxuXHJcbmFzeW5jIGZ1bmN0aW9uIHJlZ2lzdHJhTGVtYnJldGUgKGxvZ2luLCB0ZXh0bykge1xyXG4gIGNvbnN0IGNvbCA9IGRiLmNvbGxlY3Rpb24oQ09MX0xFTUJSRVRFUylcclxuICBjb25zdCByZXN1bHRhZG8gPSBhd2FpdCBjb2wuaW5zZXJ0T25lKHsgbG9naW4sIHRleHRvIH0pXHJcbiAgcmV0dXJuIHJlc3VsdGFkby5pbnNlcnRlZElkXHJcbn1cclxuXHJcbmFzeW5jIGZ1bmN0aW9uIGxlTGVtYnJldGVzIChsb2dpbikge1xyXG4gIGNvbnN0IGNvbCA9IGRiLmNvbGxlY3Rpb24oQ09MX0xFTUJSRVRFUylcclxuICBjb25zdCByZXN1bHRhZG8gPSBhd2FpdCBjb2wuZmluZCh7IGxvZ2luIH0pXHJcbiAgY29uc3QgcmVzdWx0YWRvQ29tb0FycmF5ID0gYXdhaXQgcmVzdWx0YWRvLnRvQXJyYXkoKVxyXG4gIHJldHVybiByZXN1bHRhZG9Db21vQXJyYXlcclxufVxyXG5cclxuYXN5bmMgZnVuY3Rpb24gYXBhZ2FMZW1icmV0ZSAoaWRMZW1icmV0ZSkge1xyXG4gIGNvbnN0IGNvbCA9IGRiLmNvbGxlY3Rpb24oQ09MX0xFTUJSRVRFUylcclxuICBjb25zdCByID0gYXdhaXQgY29sLmRlbGV0ZU9uZSh7IF9pZDogbmV3IE1vbmdvQ2xpZW50Lk9iamVjdElkKGlkTGVtYnJldGUpIH0pXHJcbiAgaWYgKHIuZGVsZXRlZENvdW50ID09PSAwKSB7XHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ27Do28gY29uc2VndWl1IHJlbW92ZXIgbGVtYnJldGUnKVxyXG4gIH1cclxuICByZXR1cm4gdHJ1ZVxyXG59XHJcblxyXG5leHBvcnQge1xyXG4gIGxlVXN1YXJpbywgY2FkYXN0cmFVc3VhcmlvLFxyXG4gIHJlZ2lzdHJhTGVtYnJldGUsIGxlTGVtYnJldGVzLFxyXG4gIGFwYWdhTGVtYnJldGUsIGNyaXB0b2dyYWZhU2VuaGEgfVxyXG4iXX0=",
    "map": {
      "version": 3,
      "sources": [
        "persistencia.js"
      ],
      "names": [
        "BD_URL",
        "process",
        "env",
        "client",
        "db",
        "MongoClient",
        "connect",
        "useNewUrlParser",
        "console",
        "log",
        "on",
        "close",
        "exit",
        "e",
        "criptografaSenha",
        "senha",
        "crypto",
        "require",
        "novaSenha",
        "createHash",
        "update",
        "digest",
        "COL_USUARIOS",
        "COL_LEMBRETES",
        "leUsuario",
        "login",
        "col",
        "collection",
        "usuario",
        "findOne",
        "cadastraUsuario",
        "insertOne",
        "registraLembrete",
        "texto",
        "resultado",
        "insertedId",
        "leLembretes",
        "find",
        "resultadoComoArray",
        "toArray",
        "apagaLembrete",
        "idLembrete",
        "r",
        "deleteOne",
        "_id",
        "ObjectId",
        "deletedCount",
        "Error"
      ],
      "mappings": "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",
      "sourceRoot": "C:\\Users\\alan.ensina\\Desktop\\Alan\\github\\web-programing\\05-app_lembretes\\servidor\\src",
      "sourcesContent": [
        "/* eslint-disable no-console */\r\nimport MongoClient from 'mongodb'\r\n//FIXME Descomente para importar o módulo crypto\r\nimport crypto from 'crypto'\r\n\r\nconst BD_URL = process.env.BD_URL\r\nlet client\r\nlet db\r\n\r\n(async function () {\r\n  try {\r\n    client = await MongoClient.connect(BD_URL, { useNewUrlParser: true })\r\n    db = client.db()\r\n    console.log('conectou com o banco...')\r\n    process.on('SIGINT', () => {\r\n      client.close()\r\n      console.log('desconectou do banco...')\r\n      process.exit()\r\n    })\r\n  } catch (e) {\r\n    console.log(e)\r\n    console.log('não conseguiu conexão com o banco')\r\n    process.exit(1)\r\n  }\r\n})()\r\n\r\nfunction criptografaSenha (senha) {\r\n  //FIXME Use o método scryptSync definido no módulo crypto do Node para\r\n  // criptografar a senha informada pelo usuário. Consulte a documentação do Node.\r\nvar crypto = require('crypto')\r\nvar novaSenha = crypto.createHash('md5').update(senha).digest('hex')\r\n\r\n  return novaSenha\r\n}\r\n\r\nconst COL_USUARIOS = 'usuarios'\r\nconst COL_LEMBRETES = 'lembretes'\r\n\r\nasync function leUsuario (login) {\r\n  const col = db.collection(COL_USUARIOS)\r\n  const usuario = await col.findOne({ login })\r\n  if (usuario) {\r\n    return usuario\r\n  } else {\r\n    return null\r\n  }\r\n}\r\n\r\nasync function cadastraUsuario (login, senha) {\r\n  const usuario = await leUsuario(login)\r\n  if (usuario !== null) {\r\n    return false\r\n  } else {\r\n    const col = db.collection(COL_USUARIOS)\r\n    await col.insertOne({ login, senha })\r\n    return true\r\n  }\r\n}\r\n\r\nasync function registraLembrete (login, texto) {\r\n  const col = db.collection(COL_LEMBRETES)\r\n  const resultado = await col.insertOne({ login, texto })\r\n  return resultado.insertedId\r\n}\r\n\r\nasync function leLembretes (login) {\r\n  const col = db.collection(COL_LEMBRETES)\r\n  const resultado = await col.find({ login })\r\n  const resultadoComoArray = await resultado.toArray()\r\n  return resultadoComoArray\r\n}\r\n\r\nasync function apagaLembrete (idLembrete) {\r\n  const col = db.collection(COL_LEMBRETES)\r\n  const r = await col.deleteOne({ _id: new MongoClient.ObjectId(idLembrete) })\r\n  if (r.deletedCount === 0) {\r\n    throw new Error('não conseguiu remover lembrete')\r\n  }\r\n  return true\r\n}\r\n\r\nexport {\r\n  leUsuario, cadastraUsuario,\r\n  registraLembrete, leLembretes,\r\n  apagaLembrete, criptografaSenha }\r\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1556891814250
  },
  "{\"sourceRoot\":\"C:\\\\Users\\\\alan.ensina\\\\Desktop\\\\Alan\\\\github\\\\web-programing\\\\05-app_lembretes\\\\servidor\\\\src\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\Users\\\\alan.ensina\\\\Desktop\\\\Alan\\\\github\\\\web-programing\\\\05-app_lembretes\\\\servidor\",\"filename\":\"C:\\\\Users\\\\alan.ensina\\\\Desktop\\\\Alan\\\\github\\\\web-programing\\\\05-app_lembretes\\\\servidor\\\\src\\\\jwt_util.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\Users\\\\alan.ensina\\\\Desktop\\\\Alan\\\\github\\\\web-programing\\\\05-app_lembretes\\\\servidor\",\"plugins\":[{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.4.4": {
    "metadata": {},
    "options": {
      "sourceRoot": "C:\\Users\\alan.ensina\\Desktop\\Alan\\github\\web-programing\\05-app_lembretes\\servidor\\src",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "C:\\Users\\alan.ensina\\Desktop\\Alan\\github\\web-programing\\05-app_lembretes\\servidor",
      "filename": "C:\\Users\\alan.ensina\\Desktop\\Alan\\github\\web-programing\\05-app_lembretes\\servidor\\src\\jwt_util.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "C:\\Users\\alan.ensina\\Desktop\\Alan\\github\\web-programing\\05-app_lembretes\\servidor",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "loose": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "C:\\Users\\alan.ensina\\Desktop\\Alan\\github\\web-programing\\05-app_lembretes\\servidor\\src\\jwt_util.js",
        "plugins": [
          "asyncGenerators",
          "objectRestSpread",
          "jsonStrings",
          "optionalCatchBinding"
        ]
      },
      "generatorOpts": {
        "filename": "C:\\Users\\alan.ensina\\Desktop\\Alan\\github\\web-programing\\05-app_lembretes\\servidor\\src\\jwt_util.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "C:\\Users\\alan.ensina\\Desktop\\Alan\\github\\web-programing\\05-app_lembretes\\servidor\\src",
        "sourceFileName": "jwt_util.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.geraToken = geraToken;\nexports.validaToken = validaToken;\n\nvar _jsonwebtoken = _interopRequireDefault(require(\"jsonwebtoken\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst SENHA = process.env.SENHA_JWT;\nconst DURACAO = process.env.DURACAO_JWT;\n\nfunction geraToken(login) {\n  return _jsonwebtoken.default.sign({\n    login\n  }, SENHA, {\n    expiresIn: DURACAO\n  });\n}\n\nfunction validaToken(token) {\n  try {\n    const dados = _jsonwebtoken.default.verify(token, SENHA);\n\n    return dados;\n  } catch (e) {\n    return null;\n  }\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImp3dF91dGlsLmpzIl0sIm5hbWVzIjpbIlNFTkhBIiwicHJvY2VzcyIsImVudiIsIlNFTkhBX0pXVCIsIkRVUkFDQU8iLCJEVVJBQ0FPX0pXVCIsImdlcmFUb2tlbiIsImxvZ2luIiwiand0Iiwic2lnbiIsImV4cGlyZXNJbiIsInZhbGlkYVRva2VuIiwidG9rZW4iLCJkYWRvcyIsInZlcmlmeSIsImUiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQUE7Ozs7QUFFQSxNQUFNQSxLQUFLLEdBQUdDLE9BQU8sQ0FBQ0MsR0FBUixDQUFZQyxTQUExQjtBQUNBLE1BQU1DLE9BQU8sR0FBR0gsT0FBTyxDQUFDQyxHQUFSLENBQVlHLFdBQTVCOztBQUVBLFNBQVNDLFNBQVQsQ0FBb0JDLEtBQXBCLEVBQTJCO0FBQ3pCLFNBQU9DLHNCQUFJQyxJQUFKLENBQVM7QUFBRUYsSUFBQUE7QUFBRixHQUFULEVBQW9CUCxLQUFwQixFQUEyQjtBQUFFVSxJQUFBQSxTQUFTLEVBQUVOO0FBQWIsR0FBM0IsQ0FBUDtBQUNEOztBQUVELFNBQVNPLFdBQVQsQ0FBc0JDLEtBQXRCLEVBQTZCO0FBQzNCLE1BQUk7QUFDRixVQUFNQyxLQUFLLEdBQUdMLHNCQUFJTSxNQUFKLENBQVdGLEtBQVgsRUFBa0JaLEtBQWxCLENBQWQ7O0FBQ0EsV0FBT2EsS0FBUDtBQUNELEdBSEQsQ0FHRSxPQUFPRSxDQUFQLEVBQVU7QUFDVixXQUFPLElBQVA7QUFDRDtBQUNGIiwic291cmNlUm9vdCI6IkM6XFxVc2Vyc1xcYWxhbi5lbnNpbmFcXERlc2t0b3BcXEFsYW5cXGdpdGh1Ylxcd2ViLXByb2dyYW1pbmdcXDA1LWFwcF9sZW1icmV0ZXNcXHNlcnZpZG9yXFxzcmMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgand0IGZyb20gJ2pzb253ZWJ0b2tlbidcclxuXHJcbmNvbnN0IFNFTkhBID0gcHJvY2Vzcy5lbnYuU0VOSEFfSldUXHJcbmNvbnN0IERVUkFDQU8gPSBwcm9jZXNzLmVudi5EVVJBQ0FPX0pXVFxyXG5cclxuZnVuY3Rpb24gZ2VyYVRva2VuIChsb2dpbikge1xyXG4gIHJldHVybiBqd3Quc2lnbih7IGxvZ2luIH0sIFNFTkhBLCB7IGV4cGlyZXNJbjogRFVSQUNBTyB9KVxyXG59XHJcblxyXG5mdW5jdGlvbiB2YWxpZGFUb2tlbiAodG9rZW4pIHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgZGFkb3MgPSBqd3QudmVyaWZ5KHRva2VuLCBTRU5IQSlcclxuICAgIHJldHVybiBkYWRvc1xyXG4gIH0gY2F0Y2ggKGUpIHtcclxuICAgIHJldHVybiBudWxsXHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgeyBnZXJhVG9rZW4sIHZhbGlkYVRva2VuIH1cclxuIl19",
    "map": {
      "version": 3,
      "sources": [
        "jwt_util.js"
      ],
      "names": [
        "SENHA",
        "process",
        "env",
        "SENHA_JWT",
        "DURACAO",
        "DURACAO_JWT",
        "geraToken",
        "login",
        "jwt",
        "sign",
        "expiresIn",
        "validaToken",
        "token",
        "dados",
        "verify",
        "e"
      ],
      "mappings": ";;;;;;;;AAAA;;;;AAEA,MAAMA,KAAK,GAAGC,OAAO,CAACC,GAAR,CAAYC,SAA1B;AACA,MAAMC,OAAO,GAAGH,OAAO,CAACC,GAAR,CAAYG,WAA5B;;AAEA,SAASC,SAAT,CAAoBC,KAApB,EAA2B;AACzB,SAAOC,sBAAIC,IAAJ,CAAS;AAAEF,IAAAA;AAAF,GAAT,EAAoBP,KAApB,EAA2B;AAAEU,IAAAA,SAAS,EAAEN;AAAb,GAA3B,CAAP;AACD;;AAED,SAASO,WAAT,CAAsBC,KAAtB,EAA6B;AAC3B,MAAI;AACF,UAAMC,KAAK,GAAGL,sBAAIM,MAAJ,CAAWF,KAAX,EAAkBZ,KAAlB,CAAd;;AACA,WAAOa,KAAP;AACD,GAHD,CAGE,OAAOE,CAAP,EAAU;AACV,WAAO,IAAP;AACD;AACF",
      "sourceRoot": "C:\\Users\\alan.ensina\\Desktop\\Alan\\github\\web-programing\\05-app_lembretes\\servidor\\src",
      "sourcesContent": [
        "import jwt from 'jsonwebtoken'\r\n\r\nconst SENHA = process.env.SENHA_JWT\r\nconst DURACAO = process.env.DURACAO_JWT\r\n\r\nfunction geraToken (login) {\r\n  return jwt.sign({ login }, SENHA, { expiresIn: DURACAO })\r\n}\r\n\r\nfunction validaToken (token) {\r\n  try {\r\n    const dados = jwt.verify(token, SENHA)\r\n    return dados\r\n  } catch (e) {\r\n    return null\r\n  }\r\n}\r\n\r\nexport { geraToken, validaToken }\r\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1556891673565
  }
}